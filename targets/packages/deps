#!/usr/bin/sh
#
# Extract the dependencies for the given target.
#
# Author:   Alastair Hughes
# Contact:  < hobbitalastair at yandex dot com >

source "$(dirname "$0")/../../libmain.sh"
source "$(dirname "$0")/../../libtarget.sh"

path="${configdir}/src/${target}/PKGBUILD"
exists "${path}"

# We use 'fake' depends because the PKGBUILD can't tell the difference between
# host and target depends, and also because otherwise there is no distinction
# between the local and system packages.
# TODO: Figure out how to use the .SRCINFO file instead (note that this would
#       involve an extra dependency on the .SRCINFO file)
# TODO: Figure out provides/make/install/host/target/etc deps...

echo "actions/setup.sh"
sed -n -e 's:  *: :g' -e '/# Depends:/p' < "${path}" | \
    sed -e 's:# Depends\:::' | \
    tr ' ' '\n' | \
    randomise
