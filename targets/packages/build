#!/usr/bin/bash
#
# Build the given target.
#
# Author:   Alastair Hughes
# Contact:  < hobbitalastair at yandex dot com >

source "$(dirname "$0")/../../libmain.sh"
source "$(dirname "$0")/../../libtarget.sh"
source "$(dirname "$0")/../../libpackage.sh"

# At this stage, we can assume that all of the dependencies have been built.
# We need to do quite a bit here...
path="${configdir}/src/${target}"
exists "${path}/PKGBUILD" || exit "$?"
# Build the package.
# TODO: This needs work... dependency resolution, for instance.
callmakepkg "${configdir}" "${prefix}" "${name}" -cCf || exit "$?"

